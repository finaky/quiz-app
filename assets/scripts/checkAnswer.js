const questions = {
    "Jakie jest najwyższe góry na świecie?": [
        "A. Mont Everest",
        "B. K2",
        "C. Kangchenjunga",
        "D. Annapurna",
        0
    ],
    "Która planeta w Układzie Słonecznym jest największa?": [
        "A. Jowisz",
        "B. Saturn",
        "C. Neptun",
        "D. Ziemia",
        0
    ],
    "Kto napisał powieść 'Władca Pierścieni'?": [
        "A. J.R.R. Tolkien",
        "B. George R.R. Martin",
        "C. C.S. Lewis",
        "D. J.K. Rowling",
        0
    ],
    "Ile wynosi 2 do potęgi 8?": [
        "A. 64",
        "B. 128",
        "C. 256",
        "D. 512",
        2
    ],

    "Jaki jest stolicą Francji?": [
        "Paryż",
        "Madryt",
        "Londyn",
        0
    ],
    "Ile wynosi pierwiastek kwadratowy z 16?": [
        "2",
        "4",
        "8",
        1
    ],
    "Kto napisał powieść 'Lalka'?": [
        "Henryk Sienkiewicz",
        "Eliza Orzeszkowa",
        "Bolesław Prus",
        2
    ],
    "Kiedy miał miejsce pierwszy lot człowieka w kosmos?": [
        "1957",
        "1961",
        "1969",
        1
    ],

    "Kto namalował obraz Mona Lisa?": [
        "A. Vincent van Gogh",
        "B. Pablo Picasso",
        "C. Leonardo da Vinci",
        "D. Michelangelo",
        2
        ],
        "Który kraj jest największym producentem kawy na świecie?": [
        "A. Brazylia",
        "B. Kolumbia",
        "C. Włochy",
        "D. Etiopia",
        0
        ],
        "Kto odkrył penicylinę?": [
        "A. Alexander Fleming",
        "B. Marie Curie",
        "C. Isaac Newton",
        "D. Albert Einstein",
        0
        ],
        "Jak nazywa się największa wyspa na świecie?": [
        "A. Grenlandia",
        "B. Australia",
        "C. Madagaskar",
        "D. Kuba",
        0
        ],
        "Który instrument muzyczny jest znany jako 'król instrumentów'?": [
        "A. Skrzypce",
        "B. Fortepian",
        "C. Trąbka",
        "D. Organ",
        3
    ]
}; // QUESTIONS GENERATED BY AI

const questionTitle = document.querySelector(".question-title");
const questionBox = document.querySelector(".quiz-box__questions");
const confirmButton = document.querySelector(".quiz-box__button");
const questionInfo = document.querySelector('h2');
let currentQuestion = 0;
let answerIndex = -1;
let maxQuestion = -1;

let fails = 0;

const start = () => {
    maxQuestion = Object.keys(questions).length;
    setQuestion(currentQuestion);
}

const setQuestion = (questionIndex) => {
    const questionKey = Object.keys(questions);
    const question = questionKey[questionIndex];
    const answers = questions[question];

    if(question === null || answers === null) 
        return;

    questionTitle.innerHTML = question;
    questionInfo.innerHTML = `Pytanie ${currentQuestion+1}/${maxQuestion}`;
    const lastIndex = answers.length - 1;

    answerIndex = answers[lastIndex];

    answers.forEach((element, index) => {
        if(index === lastIndex) return;

        questionBox.innerHTML += `
        <article>
            <input type="radio" id="answer-${index}">
            <label for="answer-${index}">${element}</label>
        </article>
        `;
    });
}
const check = () => {
    let index = currentQuestion += 1;
    const checkbox = document.querySelector(`#answer-${answerIndex}`);

    if(checkbox.checked === false) {
        fails++;
    }

    questionBox.innerHTML = "";

    if(index >= maxQuestion) {
        end();
        return;
    }

    setQuestion(index);
}

const end = () => {
    questionInfo.innerHTML = `Źle odpowiedziales na ${fails} pytanie!`;
    questionTitle.innerHTML = "";
    questionBox.innerHTML = "";
    confirmButton.innerHTML = "WYKONAJ TEST PONOWNIE";
    confirmButton.addEventListener("click", () => {
        window.location = "/";
    });
}

start();
confirmButton.addEventListener("click", check);